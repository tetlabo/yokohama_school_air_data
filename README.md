# yokohama_school_air_data

<div align="right">
é¶´è¦‹æ•™è‚²å·¥å­¦ç ”ç©¶æ‰€<br />
ã‚¿ãƒŠã‚«ã‚±ãƒ³ã‚¿<br />
<a href="https://mana.bi/">https://mana.bi/</a>
</div>

[ã€Œæ¨ªæµœå¸‚ç«‹å­¦æ ¡ ç©ºæ°—ã®è¦‹ãˆã‚‹åŒ–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€](https://minnaair.com/blog/yokohama/)ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã™ã€‚

[![æ•™å®¤ã®CO2æ¿ƒåº¦ã€Œè¦‹ãˆã‚‹åŒ–ã€ã€€æ¨ªæµœã®å…¨å¸‚ç«‹å­¦æ ¡ã§å°å…¥(2023å¹´7æœˆ13æ—¥)](https://img.youtube.com/vi/GurUH548LeE/0.jpg)](https://www.youtube.com/watch?v=GurUH548LeE)

## get_yokohama_air_info.R

ä¸Šè¨˜ã‚µã‚¤ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã€ãƒšãƒ¼ã‚¸å†…ã«ç›´æ¥ğŸ˜…æ›¸ã‹ã‚Œã¦ã„ã‚‹ã€è¨­ç½®å ´æ‰€ (æ ¡åã€ä½ç½®æƒ…å ±ãªã©)ã€ãƒ‡ãƒã‚¤ã‚¹æƒ…å ± (MACã‚¢ãƒ‰ãƒ¬ã‚¹ğŸ˜…ãªã©) ã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã—ã€ãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜éŒ²ã—ã¾ã™ã€‚

å®Ÿè¡Œçµæœã®ãƒ‡ãƒ¼ã‚¿ã¯ã€ã™ã§ã« `yokohama_air_places.csv` ã¨ `yokohama_air_devices.csv` ã«è¨˜éŒ²ã—ã¦ã„ã‚‹ãŸã‚ã€è¨­ç½®å ´æ‰€ã‚„æ©Ÿå™¨æ§‹æˆãŒå¤§ããå¤‰ã‚ã‚‹ã“ã¨ãŒãªã‘ã‚Œã°ã€å†åº¦ã®å®Ÿè¡Œã¯ä¸è¦ã§ã™ã€‚

ãªãŠã€å–å¾—ã—ãŸæ©Ÿå™¨ã®ãƒ‡ãƒã‚¤ã‚¹ç•ªå·ã ã‘ã‚’ã€`device_list.txt` ã¨ã—ã¦åˆ‡ã‚Šå‡ºã—ã¦ã„ã¾ã™ã€‚

## get_yokohama_air_value.R

å€‹åˆ¥ã®æ©Ÿå™¨ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¾ã™ã€‚æ©Ÿå™¨1å°1å°ã®ãƒ‡ãƒ¼ã‚¿ã¯ã€å€‹åˆ¥ã®URLã§æä¾›ã•ã‚Œã¦ã„ã¾ã™ (`https://minnaair.com/application/yokohama/detail.php?device=ãƒ‡ãƒã‚¤ã‚¹ç•ªå·`)ã€‚ãã®ãŸã‚ã€`device_list.txt` ã‚’èª­ã¿è¾¼ã‚“ã§ã€ãƒ‡ãƒã‚¤ã‚¹ç•ªå·ã”ã¨ã«å€‹åˆ¥ã®ãƒšãƒ¼ã‚¸ã‚’å–å¾—ã—ã¾ã™ã€‚

å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿ã¯ã€ç›´è¿‘ã®96ä»¶ (æ™‚é–“é–“éš”ã¯ä¸å®šæœŸ) ã¨ãªã£ã¦ã„ã‚‹ã®ã§ã€å‰å›ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã—ãŸéš›ã®ãƒ‡ãƒ¼ã‚¿ã¨æ¯”è¼ƒã—ã€ãƒ‡ãƒã‚¤ã‚¹ã”ã¨ã«æœ€å¾Œã®æ™‚åˆ»ã‚ˆã‚Šã‚‚æ–°ã—ã„ã‚‚ã®ã ã‘ã‚’ `yokohama_air_data.csv` ãƒ•ã‚¡ã‚¤ãƒ«ã«è¿½è¨˜ã—ã¦ã„ã¾ã™ã€‚ãƒ•ã‚¡ã‚¤ãƒ«ã®æ–‡å­—ã‚³ãƒ¼ãƒ‰ã¯ã€(Excelã§ã‚‚R, Pythonã§ã‚‚æ‰±ã„ã‚„ã™ã„) UTF-8 BOMä»˜ãã§ã™ã€‚ã¾ãŸã€æ©Ÿå™¨ã‹ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®æ•…éšœãªã©ã§ãƒ‡ãƒ¼ã‚¿ãŒå–å¾—ã§ããªã„ (ãƒšãƒ¼ã‚¸ã«ã‚‚è¡¨ç¤ºã•ã‚Œãªã„) ãƒ‡ãƒã‚¤ã‚¹ã¯ã‚¹ã‚­ãƒƒãƒ—ã—ã¾ã™ã€‚

æ‰‹å…ƒã§ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã™ã‚‹éš›ã¯ã€Webã‚¢ã‚¯ã‚»ã‚¹ã®é–“éš”ã‚’å……åˆ†ç©ºã‘ã¦ã€ã‚µãƒ¼ãƒãƒ¼ã®è² è·ã«ãªã‚‰ãªã„ã‚ˆã†ã«ã—ã¦ãã ã•ã„ã€‚

## GitHub Actionsã«ã‚ˆã‚‹è‡ªå‹•å®Ÿè¡Œ

GitHub Actionsã®æ©Ÿèƒ½ã‚’ä½¿ã„ã€12æ™‚é–“ã«1å›ã€`get_yokohama_air_value.R` ã‚’è‡ªå‹•å®Ÿè¡Œã—ã€ãƒªãƒã‚¸ãƒˆãƒªã® `yokohama_air_data.csv` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›´æ–°ã—ã¦ã„ã¾ã™ã€‚ãªãŠã€ãƒ•ã‚¡ã‚¤ãƒ«ã®æ§‹é€ ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

```r
> str(df)
spc_tbl_ [353,264 Ã— 11] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
 $ value_id   : num [1:353264] 3552654 3554699 3556718 3558740 3560762 ...
 $ value_uuid : chr [1:353264] "96eb9d63-9e7a-4506-b9ee-eff5a4a44d72" "96eb9d63-9e7a-4506-b9ee-eff5a4a44d72" "96eb9d63-9e7a-4506-b9ee-eff5a4a44d72" "96eb9d63-9e7a-4506-b9ee-eff5a4a44d72" ...
 $ co2        : num [1:353264] 452 452 450 445 445 443 437 437 435 439 ...
 $ humidity   : num [1:353264] 23.3 23.3 25.1 23.4 23.4 25.6 25.9 25.9 26.3 26.8 ...
 $ pm10       : num [1:353264] 3 3 2 3 3 3 4 4 4 4 ...
 $ pm25       : num [1:353264] 5 5 3 4 4 5 6 6 7 6 ...
 $ temperature: num [1:353264] 23.9 23.9 22.7 24.2 24.2 22.2 21.8 21.8 21.5 21.1 ...
 $ tvoc       : num [1:353264] 294 294 291 301 301 292 295 295 292 283 ...
 $ datetime   : POSIXct[1:353264], format: "2023-01-20 17:25:25" "2023-01-20 17:35:39" ...
 $ device_id  : num [1:353264] 848 848 848 848 848 848 848 848 848 848 ...
 $ air_quality: num [1:353264] 1 1 1 1 1 1 1 1 1 1 ...
 - attr(*, "spec")=
  .. cols(
  ..   value_id = col_double(),
  ..   value_uuid = col_character(),
  ..   co2 = col_double(),
  ..   humidity = col_double(),
  ..   pm10 = col_double(),
  ..   pm25 = col_double(),
  ..   temperature = col_double(),
  ..   tvoc = col_double(),
  ..   datetime = col_datetime(format = ""),
  ..   device_id = col_double(),
  ..   air_quality = col_double()
  .. )
 - attr(*, "problems")=<externalptr>
```

## ãƒ‡ãƒ¼ã‚¿ã®ç¯„å›²

ã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ã€æ¨ªæµœå¸‚ãŒå–ã‚Šçµ„ã¿ã‚’ç™ºè¡¨ã—ã¦ã€ã‚µã‚¤ãƒˆã§ã®å…¬é–‹ã‚’å§‹ã‚ãŸã€å‰²ã¨æ—©ã„æ®µéšã§ä½œæˆã—ãŸã®ã§ã€2023å¹´1æœˆ20æ—¥ã‹ã‚‰ã®ã€å¤§éƒ¨åˆ†ã®ãƒ‡ãƒ¼ã‚¿ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã€‚ãŸã ã€ä¸Šè¿°ã®ã‚ˆã†ã«æ©Ÿå™¨ã®ãƒˆãƒ©ãƒ–ãƒ«ãªã©ã§å–å¾—ã§ããªã„ãƒ‡ãƒ¼ã‚¿ã¯å«ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ã¾ãŸã€GitHub Actionsã«ã‚ˆã‚‹è‡ªå‹•å®Ÿè¡Œã®ä»•çµ„ã¿ã‚’æ§‹ç¯‰ã™ã‚‹ã†ãˆã§ã€è©¦è¡ŒéŒ¯èª¤ã—ãŸæœŸé–“ãŒã‚ã‚‹ãŸã‚ã€2023å¹´1æœˆ20æ—¥ã‹ã‚‰25æ—¥é ƒã®ãƒ‡ãƒ¼ã‚¿ã«ã¯ä¸€éƒ¨æ¬ æãŒã‚ã‚‹ã¨æ€ã‚ã‚Œã¾ã™ã€‚


## éå»ãƒ‡ãƒ¼ã‚¿ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

ãƒ‡ãƒ¼ã‚¿ãŒå·¨å¤§ãªã®ã§ã€æœˆã”ã¨ã«åˆ‡ã‚Šå‡ºã—ã¦ã€CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’ZIPåœ§ç¸®ã—ã¦ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ã„ã¾ã™ã€‚ä»Šå¾Œã¯ã€åŸºæœ¬çš„ã«ã€Œä»Šæœˆã€ã®ãƒ‡ãƒ¼ã‚¿ã ã‘GitHubä¸Šã«ã‚ã‚‹ã‚ˆã†ã«é‹ç”¨ã™ã‚‹äºˆå®šã§ã™ã€‚

* [2023å¹´1æœˆ](https://storage.googleapis.com/tetlabo-data/yokohama_air_data_202301.zip)
* [2023å¹´2æœˆ](https://storage.googleapis.com/tetlabo-data/yokohama_air_data_202302.zip)
* [2023å¹´3æœˆ](https://storage.googleapis.com/tetlabo-data/yokohama_air_data_202303.zip)
* [2023å¹´4æœˆ](https://storage.googleapis.com/tetlabo-data/yokohama_air_data_202304.zip)
* [2023å¹´5æœˆ](https://storage.googleapis.com/tetlabo-data/yokohama_air_data_202305.zip)
* [2023å¹´6æœˆ](https://storage.googleapis.com/tetlabo-data/yokohama_air_data_202306.zip)
* [2023å¹´7æœˆ](https://storage.googleapis.com/tetlabo-data/yokohama_air_data_202307.zip)
* [2023å¹´8æœˆ](https://storage.googleapis.com/tetlabo-data/yokohama_air_data_202308.zip)


## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã¯ã€ãƒªãƒã‚¸ãƒˆãƒªã«è¨­å®šã—ã¦ã‚ã‚‹ã‚ˆã†ã«[MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹](https://www.tohoho-web.com/ex/license.html#mit)ã¨ã—ã¾ã™ã€‚ãƒ‡ãƒ¼ã‚¿ãã®ã‚‚ã®ã«é–¢ã—ã¦ã¯ã€è‡ªæ²»ä½“ãŒå…¬è¡¨ã™ã‚‹çµ±è¨ˆå€¤ãªã®ã§ã€ç‰¹ã«åˆ©ç”¨ã«åˆ¶é™ã¯ãªã„ã¨æ€ã„ã¾ã™ã€‚
